


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > MyAccountPresenter</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.example.tecktrove.view.MyAccount</a>
</div>

<h1>Coverage Summary for Class: MyAccountPresenter (com.example.tecktrove.view.MyAccount)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">MyAccountPresenter</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (6/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (51/51)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.example.tecktrove.view.MyAccount;
&nbsp;
&nbsp;
&nbsp;import com.example.tecktrove.contacts.Email;
&nbsp;import com.example.tecktrove.contacts.Telephone;
&nbsp;import com.example.tecktrove.dao.CustomerDAO;
&nbsp;import com.example.tecktrove.dao.EmployerDAO;
&nbsp;import com.example.tecktrove.domain.Customer;
&nbsp;import com.example.tecktrove.domain.Employer;
&nbsp;import com.example.tecktrove.domain.ProductType;
&nbsp;import com.example.tecktrove.domain.Synthesis;
&nbsp;import com.example.tecktrove.domain.User;
&nbsp;
&nbsp;import java.util.ArrayList;
&nbsp;
&nbsp;public class MyAccountPresenter {
&nbsp;
&nbsp;    private MyAccountView view;
&nbsp;    private String fullname, email, phone, username, password, confirm_password;
&nbsp;    private boolean isEmployer;
&nbsp;    private EmployerDAO employerDAO;
&nbsp;    private CustomerDAO customerDAO;
&nbsp;    private int userID;
&nbsp;
&nbsp;    /**
&nbsp;     * Constructor
&nbsp;     *
&nbsp;     * @param view
&nbsp;     * @param customerDAO
&nbsp;     * @param employerDAO
&nbsp;     */
<b class="fc">&nbsp;    public MyAccountPresenter(MyAccountView view, CustomerDAO customerDAO, EmployerDAO employerDAO){</b>
<b class="fc">&nbsp;        this.view = view;</b>
<b class="fc">&nbsp;        this.customerDAO = customerDAO;</b>
<b class="fc">&nbsp;        this.employerDAO = employerDAO;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Calls logout method
&nbsp;     */
&nbsp;    public void onLogout(){
<b class="fc">&nbsp;        view.logout();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Checks values following basic rules and sets them
&nbsp;     * @param user
&nbsp;     * @param userID
&nbsp;     */
&nbsp;    public void onSaveChanges(User user, int userID) {
<b class="fc">&nbsp;        boolean allgood = false;</b>
&nbsp;
<b class="fc">&nbsp;        if (username.equals(&quot;&quot;) || password.equals(&quot;&quot;) || email.equals(&quot;&quot;) || phone.equals(&quot;&quot;) || confirm_password.equals(&quot;&quot;) || fullname.equals(&quot;&quot;)) {</b>
<b class="fc">&nbsp;            view.showMessage(&quot;?????!&quot;, &quot;?????????? ??? ?? ?????.&quot;);</b>
<b class="fc">&nbsp;        } else if (username.length() &lt; 4 || username.length() &gt; 20) {</b>
<b class="fc">&nbsp;            view.showMessage(&quot;?????!&quot;, &quot;?? ????? ?????? ?????? ?? ????? ?????? 4 ??? 20 ??????????.&quot;);</b>
<b class="fc">&nbsp;        } else if (username.contains(&quot; &quot;)) {</b>
<b class="fc">&nbsp;            view.showMessage(&quot;?????!&quot;, &quot;?? ????? ?????? ??? ?????? ?? ???????? ????.&quot;);</b>
<b class="fc">&nbsp;        } else if (phone.length() != 10) {</b>
<b class="fc">&nbsp;            view.showMessage(&quot;?????!&quot;, &quot;????? ???? ?????? ?????? ?????????.&quot;);</b>
<b class="fc">&nbsp;        } else if (password.length() &lt; 8 || password.contains(&quot; &quot;)) {</b>
<b class="fc">&nbsp;            view.showMessage(&quot;?????!&quot;, &quot;? ??????? ?????? ?? ????? ???? ??? 8 ?????????? ??? ?? ??? ???????? ????.&quot;);</b>
<b class="fc">&nbsp;        } else if (!(email.contains(&quot;@&quot;) &amp;&amp; (email.contains(&quot;.com&quot;) || email.contains(&quot;.gr&quot;)))) {</b>
<b class="fc">&nbsp;            view.showMessage(&quot;?????!&quot;, &quot;????? ??? ?????? mail.&quot;);</b>
<b class="fc">&nbsp;        } else if (!password.equals(confirm_password)) {</b>
<b class="fc">&nbsp;            view.showMessage(&quot;?????!&quot;, &quot;? ??????? ??? ? ??????? ???????????? ??? ??????????.&quot;);</b>
&nbsp;        } else {
<b class="fc">&nbsp;            String[] name = fullname.split(&quot; &quot;, 2);</b>
<b class="fc">&nbsp;            if (user instanceof Employer) {</b>
<b class="fc">&nbsp;                Employer employer = employerDAO.findEmployerByUsername(username);</b>
<b class="fc">&nbsp;                if ( employer!= null &amp;&amp; !employer.equals(user)) {</b>
<b class="fc">&nbsp;                    view.showMessage(&quot;?????!&quot;, &quot;?? ????? ?????? ??????? ???.&quot;);</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    Employer e = employerDAO.findEmployerByID(userID);</b>
<b class="fc">&nbsp;                    e.setName(name[0]); e.setLastName(name[1]); e.setEmail(new Email(email)); e.setUsername(username);</b>
<b class="fc">&nbsp;                    e.setPassword(password); e.setTelephone(new Telephone(phone));</b>
<b class="fc">&nbsp;                    allgood = true;</b>
&nbsp;                }
<b class="fc">&nbsp;            } else {</b>
<b class="fc">&nbsp;                Customer customer = customerDAO.findCustomerByUsername(username);</b>
<b class="fc">&nbsp;                if (customer != null &amp;&amp; !customer.equals(user)) {</b>
<b class="fc">&nbsp;                    view.showMessage(&quot;?????!&quot;, &quot;?? ????? ?????? ??????? ???.&quot;);</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    Customer c = customerDAO.findCustomerByID(userID);</b>
<b class="fc">&nbsp;                    c.setName(name[0]); c.setLastName(name[1]); c.setEmail(new Email(email)); c.setUsername(username);</b>
<b class="fc">&nbsp;                    c.setPassword(password); c.setTelephone(new Telephone(phone));</b>
<b class="fc">&nbsp;                    allgood = true;</b>
&nbsp;                }
&nbsp;            }
<b class="fc">&nbsp;            if (allgood) {</b>
<b class="fc">&nbsp;                view.showMessage(&quot;????????:&quot;, &quot;?? ???????? ??? ??????? ????????!&quot;);</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets values
&nbsp;     *
&nbsp;     * @param fullname
&nbsp;     * @param email
&nbsp;     * @param phoneNumber
&nbsp;     * @param username
&nbsp;     * @param password
&nbsp;     * @param confirm_password
&nbsp;     * @param isemployer
&nbsp;     */
&nbsp;    public void setInfo(String fullname, String email, String phoneNumber, String username, String password, String confirm_password, boolean isemployer){
<b class="fc">&nbsp;        this.fullname = fullname;</b>
<b class="fc">&nbsp;        this.email = email;</b>
<b class="fc">&nbsp;        this.phone = phoneNumber;</b>
<b class="fc">&nbsp;        this.username = username;</b>
<b class="fc">&nbsp;        this.password = password;</b>
<b class="fc">&nbsp;        this.confirm_password = confirm_password;</b>
<b class="fc">&nbsp;        this.isEmployer = isemployer;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Deletes account and calls logout
&nbsp;     */
&nbsp;    public void onDeleteAccount(){
<b class="fc">&nbsp;        if(isEmployer){</b>
<b class="fc">&nbsp;            employerDAO.delete(employerDAO.findEmployerByUsernameAndPassword(username, password));</b>
&nbsp;        }else{
<b class="fc">&nbsp;            customerDAO.delete(customerDAO.findCustomerByUsernameAndPassword(username, password));</b>
&nbsp;        }
<b class="fc">&nbsp;        view.logout();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Navigates the app to the order history screen
&nbsp;     */
&nbsp;    public void onHistory() {
<b class="fc">&nbsp;        view.history();</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-01-09 04:22</div>
</div>
</body>
</html>
