# ΠΧ7. Αγορά Προϊόντων

**Πρωτεύων Actor**: Πελάτης  

**Ενδιαφερόμενοι:**
- **Πελάτης**: Θέλει να αγοράσει τα προϊόντα που έχει προσθέσει στο καλάθι(συνθεσεις,εξαρτιματα). 

**Προϋποθέσεις**: Ο Πελάτης έχει ολοκληρώσει με επιτυχία την περίπτωση χρήσης "Ταυτοποίηση Χρήστη" και σε κάποιες περιπτώσεις "Δημιουργία Σύνθεσης". 
## Βασική Ροή

### Α) Αγορά Προϊόντων

1. [Ο Πελάτης αναζητά ένα προϊόν](uc2-product-search.md) που θέλει να προσθέσει στο καλάθι (Μεμονωμένα εξαρτήματα ή δημοσιευμένες συνθέσεις).
2. Ο Πελάτης επιλέγει ποσότητα προϊόντος.
3. Ο Πελάτης πατάει "Προσθήκη στο καλάθι".
4. Το Σύστημα ελέγχει αν η ποσότητα κάθε εξαρτήματος καλύπτεται από το διαθέσιμο απόθεμα (Μεμονωμένα ή σε συνθέσεις).
5. Το Σύστημα προσθέτει το προϊόν στο καλάθι.
6. Τα βήματα 1-5 επαναλαμβάνονται για όσο ο πελάτης αναζητά προϊόντα.
7. Ο Πελάτης επιλέγει το καλάθι αγοράς. 
8. Το Σύστημα εμφανίζει το καλάθι με τα προϊόντα. 
9. Ο Πελάτης επιλέγει "Αγορά".
10. Το Σύστημα ελέγχει αν τα προϊόντα στο καλάθι είναι ακόμα διαθέσιμα στην ποσότητα που ζήτησε ο πελάτης.
11. Το Σύστημα εμφανίζει στο πελάτη τη φόρμα συμπλήρωσης στοιχείων της κάρτας του καθώς και το συνολικό ποσό καλαθιού που απαιτείται να πληρώσει.
12. Ο Πελάτης συμπληρώνει τα στοιχεία του στη φόρμα πληρωμής (στοιχεία χρέωσης).
13. Ο Πελάτης επιβεβαιώνει τα στοιχεία του και επιλέγει "Συνέχεια".
14. Το Σύστημα επικυρώνει τα στοιχεία της κάρτας του πελάτη (16-ψήφιος αριθμός κάρτας).
15. Το Σύστημα καταχωρεί την παραγγελία.
16. Το Σύστημα εμφανίζει μήνυμα επιτυχούς αγοράς. 

</br>

**Εναλλακτικές Ροές**

*1α. Ο Πελάτης δεν επιθυμεί να αγοράσει άλλο προϊόν.*
1. Η Διαδικασία επιστρέφει στο βήμα 7 της βασικής ροής.
---

*2α / 3α / 9α. Ο Πελάτης επιθυμεί να επιστρέψει στην αναζήτηση προϊόντος .*
1. Ο Πελάτης επιλέγει "Επιστροφή".
2. Η Διαδικασία επιστρέφει στο βήμα 1 της βασικής ροής.
---

*12α / 13α. Η επιθυμία του πελάτη για αγορά παύει να υφίσταται.*
1. Ο Πελάτης επιλέγει "Ακύρωση".
2. Η ΠΧ τερματίζει.
---

*5α. Η ποσότητα ενός η περισσότερων εξαρτημάτων που ο πελάτης απαιτεί δεν μπορεί να καλυφθεί από το διαθέσιμο απόθεμα.*
1. Το Σύστημα εμφανίζει μήνυμα έλλειψης της συγκεκριμένης διαθεσιμότητας.
2. Ο Πελάτης επιλέγει "ΟΚ".
3. Η ΠΧ επιστρέφει στο βήμα 2 της βασικής ροής.
---

*9β. Ο Πελάτης επιθυμεί να αφαιρέσει προϊόντα από το καλάθι.*
1. Ο Πελάτης επιλέγει "Αφαίρεση" του προϊόντος.
2. Το Σύστημα το αφαιρεί από το καλάθι.
3. Η ΠΧ επιστρέφει στο βήμα 8 της βασικής ροής.
---

*10α. Το καλάθι του πελάτη είναι άδειο.*
1. Το Σύστημα εμφανίζει κατάλληλο μήνυμα.
2. Ο Πελάτης επιλέγει "ΟΚ".
3. Η ΠΧ τερματίζει.
---

*11α. Το/Τα προϊόν(τα) δεν είναι πλέον διαθέσιμα στην ζητούμενη ποσότητα.*
1. Το Σύστημα εμφανίζει κατάλληλο μήνυμα.
2. Ο Πελάτης επιλέγει "OK".
3. Η Διαδικασία επιστρέφει στο βήμα 8 της βασικής ροής.
---

*14α. Δεν έχει γίνει εισαγωγή κάποιου από τα υποχρεωτικά στοιχεία ή τα στοιχεία είναι λανθασμένα.*
1. Το Σύστημα εμφανίζει κατάλληλο μήνυμα σφάλματος.
2. Ο Πελάτης επιλέγει "ΟΚ".
3. Η ΠΧ επιστρέφει στο βήμα 12 της βασικής ροής.
---

*Σε οποιοδήποτε σημείο το λογισμικό καταρρέει.
1. Ο Πελάτης επανεκκινεί την εφαρμογή. 
2. Η Διαδικασία επιστρέφει στο βήμα 2 της ΠΧ1.


## Διάγραμμα
![Διάγραμμα](../uml/requirements/activity-product-purchase.png)