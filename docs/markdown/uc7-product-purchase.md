# ΠΧ7. Αγορά Προϊόντων

**Πρωτεύων Actor**: Πελάτης  
**Ενδιαφερόμενοι:**
- **Πελάτης**: Θέλει να αγοράσει τα προϊόντα που έχει προσθέσει στο καλάθι(συνθεσεις,εξαρτιματα). 

**Προϋποθέσεις**: Ο Πελάτης έχει ολοκληρώσει με επιτυχία την περίπτωση χρήσης "Ταυτοποίηση Χρήστη" και σε κάποιες περιπτώσεις "Δημιουργία Σύνθεσης". 
## Βασική Ροή

### Α) Αγορά Προϊόντων

1. [Ο Πελάτης αναζητά ένα προϊόν](uc2-product-search.md) που θέλει να προσθέσει στο καλάθι (Μεμονωμένα εξαρτήματα ή δημοσιευμένες συνθέσεις).
2. Ο Πελάτης επιλέγει ποσότητα προϊόντος.
3. Ο Πελάτης πατάει "Προσθήκη στο καλάθι".
4. Το Σύστημα ελέγχει αν η ποσότητα κάθε εξαρτήματος καλύπτεται από το διαθέσιμο απόθεμα (Μεμονωμένα ή σε συνθέσεις).
5. Το Σύστημα προσθέτει το προϊόν  στο καλάθι.
6. Τα βήματα 1-5 επαναλαμβάνονται για όσο ο πελάτης αναζητά προϊόντα.
7. Ο Πελάτης επιλέγει το καλάθι αγοράς. 
8. Το Σύστημα εμφανίζει το καλάθι με τα προϊόντα. 
9. Ο Πελάτης επιλέγει "Αγορά".
10. Το Σύστημα εμφανίζει στο πελάτη τη φόρμα συμπλήρωσης στοιχείων της κάρτας του καθώς και το συνολικό ποσό καλαθιού που απαιτείται να πληρώσει.
11. Ο Πελάτης συμπληρώνει τα στοιχεία του στη φόρμα πληρωμής (στοιχεία χρέωσης).
12. Ο Πελάτης επιβεβαιώνει τα στοιχεία του και επιλέγει "Συνέχεια".
13. Το Σύστημα επικυρώνει τα στοιχεία της κάρτας του πελάτη (16-ψήφιος αριθμός κάρτας).
14. Το Σύστημα καταχωρεί την παραγγελία.
15. Το Σύστημα εμφανίζει μήνυμα επιτυχής αγοράς. 


**Εναλλακτικές Ροές**
*1α. Ο Πελάτης δεν επιθυμεί να αγοράσει  άλλο προϊόν.*
1. Η Διαδικασία  κατευθύνεται στο βήμα 7 της βασικής ροής.

*2α / 3α / 9α. Ο Πελάτης επιθυμεί να επιστρέψει στην αναζήτηση προϊόντος .*
1. Ο Πελάτης επιλέγει "Επιστροφή".
2. Η Διαδικασία επιστρέφει στο βήμα 1 της βασικής ροής.

*11α / 12α. Η επιθυμία του πελάτη για αγορά παύει να υφίσταται.*
1. Ο πελάτης  επιλέγει "ακύρωση".
2. Η ΠΧ τερματίζει.

*4α. Η ποσότητα ενός η περισσότερων εξαρτημάτων που ο πελάτης απαιτεί δεν μπορεί να καλυφθεί από το διαθέσιμο απόθεμα.*
1. Το σύστημα εμφανίζει μήνυμα έλλειψης της συγκεκριμένης διαθεσιμότητας.
2. Ο πελάτης επιλέγει "ΟΚ".
3. Η ΠΧ επιστρέφει στο βήμα 2 της βασικής ροής.

*9β. Ο Πελάτης επιθυμεί να αφαιρέσει προϊόντα από το καλάθι.*
1. Ο πελάτης επιλέγει αφαίρεση του προϊόντος.
2. Το Σύστημα το αφαιρεί από το καλάθι.
3. Η ΠΧ επιστρέφει στο βήμα 8 της βασικής ροής.

*10α. Το καλάθι του πελάτη είναι άδειο.*
1. Το Σύστημα εμφανίζει κατάλληλο μήνυμα.
2. Ο Πελάτης επιλέγει "ΟΚ".
3. Η ΠΧ τερματίζει.

*13α. Δεν έχει γίνει εισαγωγή κάποιου από τα υποχρεωτικά στοιχεία ή τα στοιχεία είναι λανθασμένα.*
1. Το Σύστημα εμφανίζει κατάλληλο μήνυμα σφάλματος.
2. Ο Πελάτης επιλέγει "ΟΚ".
3. Η ΠΧ επιστρέφει στο βήμα 11 της βασικής ροής.


*Σε οποιοδήποτε σημείο το λογισμικό καταρρέει.
1. Ο Πελάτης επανεκκινεί την εφαρμογή. 
2. Η Διαδικασία επιστρέφει στο βήμα 2 της ΠΧ1.


## Διάγραμμα
![Διάγραμμα](uml/requirements/activity-product-purchase.png)